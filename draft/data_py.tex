{{\def\dash{\raise2.1pt\hbox{\rule{5pt}{0.3pt}}\hspace{1pt}}\begin{tabbing}
{\texttt{\string"\string"}}{\texttt{\string"}}\\
{\texttt{======================================================================}}\\
{\texttt{Python\hspace{6pt}Self\dash{}Organizing\hspace{6pt}Maps\hspace{6pt}\dash{}\dash{}\hspace{6pt}Data\hspace{6pt}Tools}}\\
{\texttt{\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}\dash{}}}\\
{\texttt{AUTHOR(S):\hspace{36pt}Charles\hspace{6pt}R.\hspace{6pt}Schmidt\hspace{6pt}cschmidt@rohan.sdsu.edu}}\\
{\texttt{======================================================================}}\\
{\texttt{\string"}}{\texttt{\string"\string"}}\\
\\
{\textbf{from}}\hspace{6pt}numpy\hspace{6pt}{\textbf{import}}\hspace{6pt}array,empty\\
\\
{\textbf{class}}\hspace{6pt}ObsFile:\\
\hspace{24pt}{\texttt{{'}{'}}}{\texttt{{'}\hspace{6pt}ObsFile\hspace{6pt}provides\hspace{6pt}an\hspace{6pt}interface\hspace{6pt}to\hspace{6pt}your\hspace{6pt}Observation\hspace{6pt}Data\hspace{6pt}File.}}\\
{\texttt{\hspace{48pt}The\hspace{6pt}File\hspace{6pt}should\hspace{6pt}be\hspace{6pt}formated\hspace{6pt}as\hspace{6pt}follows:}}\\
{\texttt{\hspace{48pt}The\hspace{6pt}first\hspace{6pt}line\hspace{6pt}should\hspace{6pt}contain\hspace{6pt}only\hspace{6pt}the\hspace{6pt}number\hspace{6pt}of\hspace{6pt}dimension\hspace{6pt}in\hspace{6pt}}}{}...\`$\Rightarrow$\\
...{}{\texttt{the\hspace{6pt}data\hspace{6pt}set.}}\\
{\texttt{\hspace{48pt}Each\hspace{6pt}subsequent\hspace{6pt}line\hspace{6pt}should\hspace{6pt}contain\hspace{6pt}one\hspace{6pt}observation,\hspace{6pt}each\hspace{6pt}valu}}{}...\`$\Rightarrow$\\
...{}{\texttt{e\hspace{6pt}should\hspace{6pt}be\hspace{6pt}separated}}\\
{\texttt{\hspace{48pt}a\hspace{6pt}space.}}\\
\\
{\texttt{\hspace{48pt}eg:}}\\
{\texttt{\hspace{48pt}3}}\\
{\texttt{\hspace{48pt}1.0\hspace{6pt}0.9\hspace{6pt}0.8}}\\
{\texttt{\hspace{48pt}0.6\hspace{6pt}0.0\hspace{6pt}0.2}}\\
{\texttt{\hspace{48pt}0.2\hspace{6pt}0.5\hspace{6pt}1.0}}\\
{\texttt{\hspace{48pt}0.0\hspace{6pt}1.0\hspace{6pt}0.0}}\\
\\
{\texttt{\hspace{24pt}{'}}}{\texttt{{'}{'}}}\\
\hspace{24pt}{\textbf{def}}\hspace{6pt}\_\_init\_\_(self,filename,fileType\hspace{6pt}=\hspace{6pt}{\texttt{{'}complete{'}}}):\\
\hspace{48pt}{\texttt{{'}{'}}}{\texttt{{'}\hspace{6pt}Opens\hspace{6pt}the\hspace{6pt}file\hspace{6pt}{'}}}{\texttt{{'}{'}}}\\
\hspace{48pt}self.filename\hspace{6pt}=\hspace{6pt}filename\\
\hspace{48pt}self.fileObj\hspace{6pt}=\hspace{6pt}open(filename,{\texttt{{'}r{'}}})\\
\hspace{48pt}self.fileType\hspace{6pt}=\hspace{6pt}fileType\\
\hspace{48pt}self.reset()\\
\hspace{24pt}{\textbf{def}}\hspace{6pt}\_\_iter\_\_(self):\\
\hspace{48pt}{\texttt{{'}{'}}}{\texttt{{'}\hspace{6pt}Create\hspace{6pt}an\hspace{6pt}iterator\hspace{6pt}{'}}}{\texttt{{'}{'}}}\\
\hspace{48pt}{\textbf{return}}\hspace{6pt}self\\
\hspace{24pt}{\textbf{def}}\hspace{6pt}listolists(self,comments=False):\\
\hspace{48pt}{\texttt{{'}{'}}}{\texttt{{'}\hspace{6pt}Returns\hspace{6pt}the\hspace{6pt}entire\hspace{6pt}data\hspace{6pt}file\hspace{6pt}as\hspace{6pt}a\hspace{6pt}list\hspace{6pt}of\hspace{6pt}lists\hspace{6pt}{'}}}{\texttt{{'}{'}}}\\
\hspace{48pt}self.fileObj.seek(0)\\
\hspace{48pt}lines\hspace{6pt}=\hspace{6pt}self.fileObj.readlines()\\
\hspace{48pt}dims\hspace{6pt}=\hspace{6pt}lines.pop(0)\\
\hspace{48pt}dims\hspace{6pt}=\hspace{6pt}int(dims)\\
\hspace{48pt}lines\hspace{6pt}=\hspace{6pt}{[}line.split()\hspace{6pt}{\textbf{for}}\hspace{6pt}line\hspace{6pt}{\textbf{in}}\hspace{6pt}lines{]}\\
\hspace{48pt}{\textbf{if}}\hspace{6pt}{\textbf{not}}\hspace{6pt}comments:\\
\hspace{72pt}lines\hspace{6pt}=\hspace{6pt}{[}line{[}:dims{]}\hspace{6pt}{\textbf{for}}\hspace{6pt}line\hspace{6pt}{\textbf{in}}\hspace{6pt}lines{]}\\
\hspace{72pt}lines\hspace{6pt}=\hspace{6pt}{[}array(map(float,line),{\texttt{{'}float{'}}})\hspace{6pt}{\textbf{for}}\hspace{6pt}line\hspace{6pt}{\textbf{in}}\hspace{6pt}lines{]}\\
\hspace{48pt}{\textbf{else:}}\\
\hspace{72pt}lines\hspace{6pt}=\hspace{6pt}{[}line{[}dims:{]}\hspace{6pt}{\textbf{for}}\hspace{6pt}line\hspace{6pt}{\textbf{in}}\hspace{6pt}lines{]}\\
\hspace{48pt}{\textbf{return}}\hspace{6pt}lines\\
\hspace{24pt}{\textbf{def}}\hspace{6pt}Snext(self):\\
\hspace{48pt}{\texttt{{'}{'}}}{\texttt{{'}\hspace{6pt}Returns\hspace{6pt}the\hspace{6pt}next\hspace{6pt}line\hspace{6pt}of\hspace{6pt}a\hspace{6pt}\string"sparse\string"\hspace{6pt}data\hspace{6pt}file.}}\\
{\texttt{\hspace{72pt}A\hspace{6pt}sparse\hspace{6pt}data\hspace{6pt}file\hspace{6pt}is\hspace{6pt}one\hspace{6pt}that\hspace{6pt}contains\hspace{6pt}missing\hspace{6pt}values}}\\
{\texttt{\hspace{48pt}{'}}}{\texttt{{'}{'}}}\\
\hspace{48pt}line\hspace{6pt}=\hspace{6pt}self.fileObj.next()\\
\hspace{48pt}id,line\hspace{6pt}=\hspace{6pt}line.split({\texttt{{'}:{'}}})\\
\hspace{48pt}line\hspace{6pt}=\hspace{6pt}line.split({\texttt{{'},{'}}})\\
\hspace{48pt}Num\hspace{6pt}=\hspace{6pt}len(line)/2\\
\hspace{48pt}indices\hspace{6pt}=\hspace{6pt}empty(Num,{\texttt{{'}int16{'}}})\\
\hspace{48pt}values\hspace{6pt}=\hspace{6pt}empty(Num,{\texttt{{'}float{'}}})\\
\hspace{48pt}c\hspace{6pt}=\hspace{6pt}0\\
\hspace{48pt}{\textbf{for}}\hspace{6pt}n\hspace{6pt}{\textbf{in}}\hspace{6pt}xrange(0,Num$\ast$2,2):\\
\hspace{72pt}indices{[}c{]}\hspace{6pt}=\hspace{6pt}int(line{[}n{]})\dash{}1\\
\hspace{72pt}values{[}c{]}\hspace{6pt}=\hspace{6pt}float(line{[}n+1{]})\\
\hspace{72pt}c\hspace{6pt}+=\hspace{6pt}1\\
\hspace{48pt}{\textbf{return}}\hspace{6pt}id,indices,values\\
\hspace{24pt}{\textbf{def}}\hspace{6pt}Cnext(self):\\
\hspace{48pt}{\texttt{{'}{'}}}{\texttt{{'}\hspace{6pt}Return\hspace{6pt}the\hspace{6pt}next\hspace{6pt}line\hspace{6pt}of\hspace{6pt}a\hspace{6pt}\string"complete\string"\hspace{6pt}data\hspace{6pt}file.}}\\
{\texttt{\hspace{72pt}A\hspace{6pt}complete\hspace{6pt}data\hspace{6pt}file\hspace{6pt}is\hspace{6pt}one\hspace{6pt}without\hspace{6pt}any\hspace{6pt}missing\hspace{6pt}values.}}\\
{\texttt{\hspace{48pt}{'}}}{\texttt{{'}{'}}}\\
\hspace{48pt}line\hspace{6pt}=\hspace{6pt}self.fileObj.next()\\
\hspace{48pt}line\hspace{6pt}=\hspace{6pt}line.split()\\
\hspace{48pt}id\hspace{6pt}=\hspace{6pt}self.nextLine\\
\hspace{48pt}{\textbf{for}}\hspace{6pt}n\hspace{6pt}{\textbf{in}}\hspace{6pt}xrange(0,self.Dims):\\
\hspace{72pt}self.values{[}n{]}\hspace{6pt}=\hspace{6pt}float(line{[}n{]})\\
\hspace{48pt}self.nextLine+=1\\
\hspace{48pt}{\textbf{return}}\hspace{6pt}id,self.indices,self.values\\
\hspace{24pt}{\textbf{def}}\hspace{6pt}reset(self):\\
\hspace{48pt}{\texttt{{'}{'}}}{\texttt{{'}\hspace{6pt}Resets\hspace{6pt}the\hspace{6pt}file\hspace{6pt}such\hspace{6pt}that\hspace{6pt}the\hspace{6pt}next\hspace{6pt}line\hspace{6pt}returned\hspace{6pt}is\hspace{6pt}the\hspace{6pt}fi}}{}...\`$\Rightarrow$\\
...{}{\texttt{rst\hspace{6pt}line\hspace{6pt}{'}}}{\texttt{{'}{'}}}\\
\hspace{48pt}self.fileObj.seek(0)\\
\hspace{48pt}self.nextLine\hspace{6pt}=\hspace{6pt}0\hspace{6pt}{\it{\#Zero\hspace{6pt}Base}}\\
\hspace{48pt}{\textbf{if}}\hspace{6pt}self.fileType\hspace{6pt}==\hspace{6pt}{\texttt{{'}complete{'}}}:\\
\hspace{72pt}self.next\hspace{6pt}=\hspace{6pt}self.Cnext\\
\hspace{72pt}self.Dims\hspace{6pt}=\hspace{6pt}int(self.fileObj.next())\\
\hspace{72pt}self.indices\hspace{6pt}=\hspace{6pt}array(range(self.Dims),{\texttt{{'}int16{'}}})\hspace{6pt}\\
\hspace{72pt}self.values\hspace{6pt}=\hspace{6pt}empty(self.Dims,{\texttt{{'}float{'}}})\hspace{6pt}\\
\hspace{48pt}{\textbf{elif}}\hspace{6pt}self.fileType\hspace{6pt}==\hspace{6pt}{\texttt{{'}sparse{'}}}:\\
\hspace{72pt}self.next\hspace{6pt}=\hspace{6pt}self.Snext\\
\hspace{48pt}{\textbf{else:}}\\
\hspace{72pt}{\textbf{raise}}\hspace{6pt}{\texttt{\string"fileTypeError\string"}}\\
\hspace{24pt}{\textbf{def}}\hspace{6pt}stream(self):\\
\hspace{48pt}{\texttt{{'}{'}}}{\texttt{{'}\hspace{6pt}Loops\hspace{6pt}of\hspace{6pt}the\hspace{6pt}records,\hspace{6pt}always\hspace{6pt}returns\hspace{6pt}a\hspace{6pt}line,\hspace{6pt}if\hspace{6pt}the\hspace{6pt}end\hspace{6pt}of}}{}...\`$\Rightarrow$\\
...{}{\texttt{\hspace{6pt}file\hspace{6pt}is\hspace{6pt}reached,\hspace{6pt}}}\\
{\texttt{\hspace{72pt}the\hspace{6pt}file\hspace{6pt}pointer\hspace{6pt}is\hspace{6pt}reset\hspace{6pt}back\hspace{6pt}to\hspace{6pt}that\hspace{6pt}start.}}\\
{\texttt{\hspace{48pt}{'}}}{\texttt{{'}{'}}}\\
\hspace{48pt}{\textbf{try:}}\\
\hspace{72pt}{\textbf{return}}\hspace{6pt}self.next()\\
\hspace{48pt}{\textbf{except:}}\\
\hspace{72pt}self.reset()\\
\hspace{72pt}{\textbf{return}}\hspace{6pt}self.next()\\
\hspace{24pt}{\textbf{def}}\hspace{6pt}close(self):\\
\hspace{48pt}{\texttt{{'}{'}}}{\texttt{{'}\hspace{6pt}Close\hspace{6pt}the\hspace{6pt}file\hspace{6pt}{'}}}{\texttt{{'}{'}}}\\
\hspace{48pt}self.fileObj.close()
\end{tabbing}}}
